{% extends "base.html" %}

{% load assets %}

{% block ss %}
{% assets "css_table_create" %}
    <link href="{{ ASSET_URL }}" rel="stylesheet" type="text/css">
{% endassets %}

{% assets "css_fileuploader" %}
    <link href="{{ ASSET_URL }}" rel="stylesheet" type="text/css">
{% endassets %}

{% assets "base_css" %}
    <link href="{{ ASSET_URL }}" rel="stylesheet" type="text/css">
{% endassets %}

{% assets "jquery_css" %}
   <link href="{{ ASSET_URL }}" rel="stylesheet" type="text/css">
{% endassets %}

{% endblock %}
{% block title %}Wordwalls - select list{% endblock %}

{% block content %}

<!-- {% assets "js_table_create" %}
    <script type="text/javascript" src="{{ ASSET_URL }}"></script>
{% endassets %} -->


<P></P>
<div id="commonForm">
    {{lexForm.as_p}}
    {{timeForm.as_p}}
</div>

<div id="listTabs" style="display:none;">
    <ul>
        <li><a href="#tabs-1">Today's Challenges</a></li>
        <li><a href="#tabs-2">Search by probability</a></li>
        <li><a href="#tabs-3">Saved List</a></li>
        <li><a href="#tabs-4">Named List</a></li>
    </ul>
    <div id="tabs-1">
        <div id="showChallengesHelp" class="showHelp">
        Click for help
        </div>

        <div id="challengesHelp" class="help">
        <P>Hooooooold. Challenge. A new set of challenges is generated once a day. To play the challenges, select the
            lexicon and challenge, and click Play! You can also see how other people did today on the display to the
            right of the challenge.</P>
        <P>The "Week's Bingo Toughies" list gets updated every Tuesday at midnight PST (i.e. Tuesday 3AM EST). It will
            have the 50 toughest bingo alphagrams (7 and 8 letter words) of all of the previous week's challenges. The
            toughest bingos are the ones most commonly missed that week.</P>
        <P>If you want to view results of previous challenges select the date below. You can also play these challenges.
            Any new records set for older challenges won't count for your medal total, though. <em>Note: All dates are in
                Pacific Standard Time (PST).</em></P>
        </div>
        <table id="challengesLayout">
        <tr>
            <td id="dcFormCell">
                {{ dcForm.as_p}}
                <button class="formSubmitButton" id="challengeSubmit">Play!</button>
            </td>
            <td id="dcResultsCell">
                <span id="dcResultsLabel"></span><BR>
                <div id="dcResultsDiv"></div>
            </td>
        </tr>
        </table>

    </div>

    <div id="tabs-2">
        <div id="showSearchParamsHelp" class="showHelp">
        Click for help
        </div>

        <div id="searchParamsHelp" class="help">
        <P>Here, you can search word lists by probability (and possibly other parameters in the future). Simply select a lexicon and a word length. The minimum probability must always be greater than or equal 1; the maximum probability must be less than or equal to the number of words with that word length -- this number will show up in the "Max probability" label below. In the future, you'll also be able to select multiplayer modes.</P>
        <P>The probabilities are alphagram probabilities, and not word probabilities.</P>
        </div>

        {{ fwForm.as_p }}
        <button class="formSubmitButton" id="searchParamsSubmit">Play!</button>
        <span style="width:100px;display:inline-block;text-align:center;">or</span>
        <button class="formSubmitButton" id="searchParamsFlashcard">Flashcard</button>
    </div>

    <div id ="tabs-3">
        <div id="showSavedListHelp" class="showHelp">
        Click for help
        </div>

        <div id="savedListHelp" class="help">
            <H3>Playing a saved list</H3>
            <P>First, please select a lexicon to view the saved lists for that lexicon.</P>
            <P>You can select a list that you have previously saved here. When you are playing a game, you have the option to save at the beginning or end of a round by clicking the Save button. Once you do this, the game will autosave after every round you play. When you save you will be prompted for a case-insensitive list name. These saved games show up in the list below. There are four options:</P>
            <H4>Continue list progress (default)</H4>
            <P>This will continue the list from where you last left off.</P>

            <H4>Quiz only on first missed</H4>
            <P>The very first time you go through a word list in its entirety, you will have a list of missed words. This quiz will consist only of those missed words. <em>If you select this option, and don't finish the 'first missed' list, if you want to finish it next time make sure to select 'continue list progress.'</em> You will get an error if you select this option before finishing a quiz once.</P>

            <H4>Restart list</H4>
            <P>In this option, you will restart the list from scratch. This eliminates progress on the list, so be careful! Your 'first' missed data will be lost.</P>
            <P>The table below that shows your word lists will show the name of the word list, and the last time this list was saved. There will also be an asterisk (*) after the date if you have already gone through the entire word list at least once.</P>
            <H4>Delete list</H4>
            <P>This option completely deletes the list; this cannot be undone! Make sure you want to delete your saved list before you choose this!</P>
            <H3>Uploading a new list</H3>
            <P>You can select the upload button to add a new word list to your account. Please select a file containing a list of words, one word per line. This app will quiz you on alphagrams, so for example, if your list contains DIATRONS but not INTRADOS, the app will still expect both words when it quizzes you for ADINORST. Make sure to select the correct lexicon.</P>
            <P>You can easily export a list from a program such as Zyzzyva; simply do a search, and right click on the search window, and click Save List. The list must contain no more than {{upload_list_limit}} words at this time, and the words must be between 2 and 15 letters long. This limit will probably be increased in the future once I figure out how to use Celery. </P>
        </div>
        <div id="numAlphasInfo"></div>
            {{ slForm.as_p }}
        <span id="savedListWarning"></span>

        <button class="formSubmitButton" id="savedListsSubmit">Play!</button>
        <span style="width:100px;display:inline-block;text-align:center;">or</span>
        <button class="formSubmitButton" id="savedListsFlashcardEntire">Flashcard entire list</button>
        <button class="formSubmitButton" id="savedListsFlashcardFM">Flashcard first missed</button>
        <br>
        <H3>Or upload a new list:</H3>

        <div id="file-uploader">
            <noscript>
                <p>Please enable JavaScript to use file uploader.</p>
            </noscript>
        </div>
        <div id="file-upload-msgs">
        </div>
    </div>

    <div id ="tabs-4">
        <div id="showNamedListHelp" class="showHelp">
        Click for help
        </div>
        <div id="namedListHelp" class="help">
        <P>These are named lists for each lexicon, which can be used as shortcuts instead of searching by probability. There are also JQXZ lists and CSW-only lists available. There may be more lists in the future. Simply find a list and click Play!</P>
        <P>If you wish to save your progress on a list here, you can enter a list name once you're playing, just like the other lists. The saved list will show up in your saved lists.</P>
        </div>

        {{ nlForm.as_p }}
        <button class="formSubmitButton" id="namedListsSubmit">Play!</button>
        <span style="width:100px;display:inline-block;text-align:center;">or</span>
        <button class="formSubmitButton" id="namedListsFlashcard">Flashcard</button>
    </div>
</div>

<div id="infoDialog" title="">
</div>

<script>
var require = {
  config: {
    'createTableMain': {
      lengthCounts: "{{lengthCounts|escapejs}}",
      dcTimes: "{{dcTimes|escapejs}}",
      createTableUrl: "{% url wordwalls_create_table %}",
      createQuizUrl: "{% url flashcards_create_quiz %}",
      defaultLexicon: "{{defaultLexicon.pk}}",
      csrfToken: "{{csrf_token}}",
      ajaxUploadUrl: "{% url ajax_upload %}"
    }
  }
}
</script>
<script src="/static/lib/require/require-min.js" data-main="/static/js/wordwalls/createTableMain"></script>

{% endblock %}

{% comment %} Aerolith 2.0: A web-based word game website
Copyright (C) 2011 Cesar Del Solar

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.

To contact the author, please email delsolar at gmail dot com
{% endcomment %}
